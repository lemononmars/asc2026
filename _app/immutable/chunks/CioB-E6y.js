import{E as A,F as M,G as m,I as k,j as R,J as T,m as P,w as L,K as w,M as B,k as N,O as Y,P as F,Q as x,R as U,S as C,v as q,q as I,T as G,U as Z,V as $,g as S,W as j,X as z,Y as H,Z as J,f as K,_ as Q,a0 as V,b as W,l as X,a1 as ee,a2 as te,a3 as se,a4 as ae,a5 as re,a6 as ie}from"./D45SXYzC.js";class ne{anchor;#t=new Map;#s=new Map;#e=new Map;#a=!0;constructor(e,s=!0){this.anchor=e,this.#a=s}#r=()=>{var e=A;if(this.#t.has(e)){var s=this.#t.get(e),t=this.#s.get(s);if(t)M(t);else{var i=this.#e.get(s);i&&(this.#s.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[n,r]of this.#t){if(this.#t.delete(n),n===e)break;const a=this.#e.get(r);a&&(m(a.effect),this.#e.delete(r))}for(const[n,r]of this.#s){if(n===s)continue;const a=()=>{if(Array.from(this.#t.values()).includes(n)){var u=document.createDocumentFragment();w(r,u),u.append(R()),this.#e.set(n,{effect:r,fragment:u})}else m(r);this.#s.delete(n)};this.#a||!t?k(r,a,!1):a()}}};#i=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[t,i]of this.#e)s.includes(t)||(m(i.effect),this.#e.delete(t))};ensure(e,s){var t=A,i=B();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(i){var n=document.createDocumentFragment(),r=R();n.append(r),this.#e.set(e,{effect:T(()=>s(r)),fragment:n})}else this.#s.set(e,T(()=>s(this.anchor)));if(this.#t.set(t,e),i){for(const[a,c]of this.#s)a===e?t.skipped_effects.delete(c):t.skipped_effects.add(c);for(const[a,c]of this.#e)a===e?t.skipped_effects.delete(c.effect):t.skipped_effects.add(c.effect);t.oncommit(this.#r),t.ondiscard(this.#i)}else P&&(this.anchor=L),this.#r()}}function de(f,e,s=!1){P&&Y();var t=new ne(f),i=s?F:0;function n(r,a){if(P){const u=x(f)===U;if(r===u){var c=C();q(c),t.anchor=c,I(!1),t.ensure(r,a),I(!0);return}}t.ensure(r,a)}N(()=>{var r=!1;e((a,c=!0)=>{r=!0,n(c,a)}),r||n(!1,null)},i)}let b=!1;function fe(f){var e=b;try{return b=!1,[f(),b]}finally{b=e}}function ue(f,e,s,t){var i=!X||(s&ee)!==0,n=(s&V)!==0,r=(s&se)!==0,a=t,c=!0,u=()=>(c&&(c=!1,a=r?W(t):t),a),h;if(n){var y=re in f||ie in f;h=G(f,e)?.set??(y&&e in f?d=>f[e]=d:void 0)}var o,p=!1;n?[o,p]=fe(()=>f[e]):o=f[e],o===void 0&&t!==void 0&&(o=u(),h&&(i&&Z(),h(o)));var _;if(i?_=()=>{var d=f[e];return d===void 0?u():(c=!0,d)}:_=()=>{var d=f[e];return d!==void 0&&(a=void 0),d===void 0?a:d},i&&(s&$)===0)return _;if(h){var O=f.$$legacy;return(function(d,v){return arguments.length>0?((!i||!v||O||p)&&h(v?_():d),d):_()})}var g=!1,l=((s&te)!==0?K:Q)(()=>(g=!1,_()));n&&S(l);var D=H;return(function(d,v){if(arguments.length>0){const E=v?S(l):i&&n?j(d):d;return z(l,E),g=!0,a!==void 0&&(a=E),d}return ae&&g||(D.f&J)!==0?l.v:S(l)})}export{ne as B,de as i,ue as p};
